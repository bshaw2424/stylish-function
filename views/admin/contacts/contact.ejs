<%- include ("../../partials/header") %><%- include ("../../admin/mobile-nav")
%>

<section class="message-page col s12">
  <%- include ("../../admin/admin-nav") %>
  <!-- filter section -->
  <div class="message-center-header">
    <div class="container">
      <h1 class="message-center_h1">Messages</h1>
      <!-- collection container -->
      <div class="delete-container collection with-header">
        <div class="check-all-button-message-counter">
          <span>Messages: <%= messages.length %></span>
        </div>
        <div class="input-field">
          <div>
            <select class="browser-default" id="message-filter">
              <option class="disabled">Sort By:</option>
              <option value="oldest">Oldest</option>
              <option value="newest">Newest</option>
            </select>
            <!-- <label for="message-filter">Sort By:</label> -->
          </div>
        </div>
      </div>

      <!-- individual message body section -->
      <div class="collection">
        <% messages.forEach(message =>{ %>
        <a
          href="/admin/messages/<%= message._id %>"
          id="message-container"
          class="collection-item"
        >
          <div class="collection-item-info">
            <div class="collection-group">
              <span><%= message.name %></span>
            </div>
            <div class="collection-group collection-group_subject">
              <span class="message"> <%= message.subject %></span>
            </div>
            <div class="collection-group collection-group_date">
              <span class="date"
                ><%= message.created_on.toLocaleDateString() %></span
              >
            </div>
            <form
              class="message-delete-button"
              action="/admin/messages/<%= message._id %>?_method=DELETE"
              method="POST"
            >
              <button
                class="material-icons no-visibility message-center_delete"
              >
                delete
              </button>
            </form>
          </div>
        </a>
        <% }) %>
        <!-- end of message body container -->
      </div>
      <!-- end of collection container -->
    </div>
  </div>
</section>
<script src="../../../js/scripts.js"></script>

<%- include ("../../partials/footer") %>
